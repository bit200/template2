version: "3.9"
services:
  app:
    build: .
    ports:
      - "${HOST_PORT}:3000"  # Map host port (env var) to container port 3000
    volumes:
      - "${PWD}/index.js:/app/index.js"
    depends_on:
      - mongodb
    environment:
      MONGODB_URI: mongodb://mongodb:27017/mydatabase
  mongodb:
    image: mongo:latest
    # ... other MongoDB config